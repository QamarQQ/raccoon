<!DOCTYPE html><head><meta charset="UTF-8"><title>FixedPointProblem.md|RACCOON</title><link rel="icon" type="image/x-icon" href="../../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://hugary1995.github.io/raccoon/index.html" class="left moose-logo hide-on-med-and-down">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="../../install/index.html">Install</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../../syntax/index.html">Syntax</a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="d140fdb3-3768-4f76-a799-36a7a9e9d878"><i class="material-icons">menu</i></a><ul class="sidenav" id="d140fdb3-3768-4f76-a799-36a7a9e9d878"><li><a href="../../install/index.html">Install</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../../syntax/index.html">Syntax</a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="https://hugary1995.github.io/raccoon/index.html" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">problems</span><a href="#" class="breadcrumb">FixedPointProblem</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="d4b698d6-09ac-4eeb-904a-2211ea97c451" data-section-level="1" data-section-text="FixedPointProblem"><h1 id="fixedpointproblem">FixedPointProblem</h1><div class="card moose-alert moose-alert-construction"><div class="card-title moose-alert-title"><span class="moose-alert-title-brand">under construction:</span>Undocumented Class</div><div class="card-content"><div class="moose-alert-content"><img src="../../media/framework/under-construction.gif" class="moose-alert-construction-img"></img><p><p>The FixedPointProblem has not been documented. The content listed below should be used as a starting point for documenting the class, which includes the typical automatic documentation associated with a MooseObject; however, what is contained is ultimately determined by what is necessary to make the documentation clear for users.</p><pre class="moose-pre"><code class="language-markdown">
# FixedPointProblem

!syntax description /Problem/FixedPointProblem

## Overview

!! Replace these lines with information regarding the FixedPointProblem object.

## Example Input File Syntax

!! Describe and include an example of how to use the FixedPointProblem object.

!syntax parameters /Problem/FixedPointProblem

!syntax inputs /Problem/FixedPointProblem

!syntax children /Problem/FixedPointProblem
</code></pre></p></div></div></div><p>A normal (default) Problem object that contains a single NonlinearSystem and a single AuxiliarySystem object.</p><section class="scrollspy" id="bd3cc3d4-ea29-49c1-8cef-abae9b1035a8" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="2fe80a6d-f3c5-4e0b-97e2-55bca023cc19" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">block</span><span class="moose-parameter-header-description">Block IDs for the coordinate systems</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;SubdomainName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Block IDs for the coordinate systems</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">coord_type</span><span class="moose-parameter-header-default">XYZ</span><span class="moose-parameter-header-description">Type of the coordinate system per block param</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>XYZ</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>XYZ RZ RSPHERICAL</p><p class="moose-parameter-description"><span>Description:</span>Type of the coordinate system per block param</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">error_on_jacobian_nonzero_reallocation</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">This causes PETSc to error if it had to reallocate memory in the Jacobian matrix due to not having enough nonzeros</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>This causes PETSc to error if it had to reallocate memory in the Jacobian matrix due to not having enough nonzeros</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">extra_tag_matrices</span><span class="moose-parameter-header-description">Extra matrices to add to the system that can be filled by objects which compute residuals and Jacobians (Kernels, BCs, etc.) by setting tags on them.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;TagName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Extra matrices to add to the system that can be filled by objects which compute residuals and Jacobians (Kernels, BCs, etc.) by setting tags on them.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">extra_tag_vectors</span><span class="moose-parameter-header-description">Extra vectors to add to the system that can be filled by objects which compute residuals and Jacobians (Kernels, BCs, etc.) by setting tags on them.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;TagName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Extra vectors to add to the system that can be filled by objects which compute residuals and Jacobians (Kernels, BCs, etc.) by setting tags on them.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">force_restart</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">EXPERIMENTAL: If true, a sub_app may use a restart file instead of using of using the master backup file</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>EXPERIMENTAL: If true, a sub_app may use a restart file instead of using of using the master backup file</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">fv_bcs_integrity_check</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set to false to disable checking of overlapping Dirichlet and Flux BCs and/or multiple DirichletBCs per sideset</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set to false to disable checking of overlapping Dirichlet and Flux BCs and/or multiple DirichletBCs per sideset</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">ignore_zeros_in_jacobian</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Do not explicitly store zero values in the Jacobian matrix if true</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Do not explicitly store zero values in the Jacobian matrix if true</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">kernel_coverage_check</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set to false to disable kernel->subdomain coverage check</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set to false to disable kernel->subdomain coverage check</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">material_coverage_check</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set to false to disable material->subdomain coverage check</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set to false to disable material->subdomain coverage check</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">material_dependency_check</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set to false to disable material dependency check</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set to false to disable material dependency check</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">near_null_space_dimension</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The dimension of the near nullspace</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The dimension of the near nullspace</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">null_space_dimension</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The dimension of the nullspace</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The dimension of the nullspace</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">parallel_barrier_messaging</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Displays messaging from parallel barrier notifications when executing or transferring to/from Multiapps (default: false)</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Displays messaging from parallel barrier notifications when executing or transferring to/from Multiapps (default: false)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">restart_file_base</span><span class="moose-parameter-header-description">File base name used for restart (e.g. <path>/<filebase> or <path>/LATEST to grab the latest file available)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>FileNameNoExtension</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>File base name used for restart (e.g. <path>/<filebase> or <path>/LATEST to grab the latest file available)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">rz_coord_axis</span><span class="moose-parameter-header-default">Y</span><span class="moose-parameter-header-description">The rotation axis (X | Y) for axisymetric coordinates</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>Y</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>X Y</p><p class="moose-parameter-description"><span>Description:</span>The rotation axis (X | Y) for axisymetric coordinates</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">skip_additional_restart_data</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">True to skip additional data in equation system for restart. It is useful for starting a transient calculation with a steady-state solution</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>True to skip additional data in equation system for restart. It is useful for starting a transient calculation with a steady-state solution</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">skip_nl_system_check</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">True to skip the NonlinearSystem check for work to do (e.g. Make sure that there are variables to solve for).</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>True to skip the NonlinearSystem check for work to do (e.g. Make sure that there are variables to solve for).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">solve</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether or not to actually solve the Nonlinear system.  This is handy in the case that all you want to do is execute AuxKernels, Transfers, etc. without actually solving anything</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not to actually solve the Nonlinear system.  This is handy in the case that all you want to do is execute AuxKernels, Transfers, etc. without actually solving anything</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">transpose_null_space_dimension</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The dimension of the transpose nullspace</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The dimension of the transpose nullspace</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_nonlinear</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Determines whether to use a Nonlinear vs a Eigenvalue system (Automatically determined based on executioner)</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Determines whether to use a Nonlinear vs a Eigenvalue system (Automatically determined based on executioner)</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="2a124d99-3fa9-4b1f-b77d-5884372d25af" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">default_ghosting</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Whether or not to use libMesh's default amount of algebraic and geometric ghosting</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not to use libMesh's default amount of algebraic and geometric ghosting</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="c1a385ef-e0e6-4d9c-b47b-b9f67de5a8bd" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#ff952193-9780-489c-87cb-2852c49a2276" class="modal-trigger">test/tests/fpi/loosely_coupled.i</a></li><li><a href="#3b783836-652a-40bc-82a2-d35cbb2b5cef" class="modal-trigger">benchmarks/mode1_initial_damage/mechanical_fracture_uo_quad4.i</a></li><li><a href="#52a8827e-e87c-4ec2-8d02-07dc51d2e3a5" class="modal-trigger">benchmarks/sneddon/mechanical_fracture_uo.i</a></li><li><a href="#e4968d0c-b02a-4d59-a7cc-89dc7ba56065" class="modal-trigger">benchmarks/fixed_point_iteration/mechanical_fracture_var.i</a></li><li><a href="#84c6a112-6aaf-4182-b603-ce0b22012ec2" class="modal-trigger">benchmarks/mode1_initial_damage/mechanical_fracture_uo_tri3.i</a></li><li><a href="#7518731c-47e3-4928-a3fd-c9cb242ed330" class="modal-trigger">benchmarks/bazant/2D.i</a></li><li><a href="#3ac23960-7f32-4fbb-b6fc-9f0d4aa35a50" class="modal-trigger">benchmarks/fixed_point_iteration/mechanical_fracture_uo.i</a></li><li><a href="#a1f1fc3f-46e4-4ef2-992a-00bb84b80f2f" class="modal-trigger">benchmarks/shockwave_lithotripsy/elastodynamic_exp.i</a></li><li><a href="#27d156e5-07e4-46f5-ac57-eccb87212365" class="modal-trigger">test/tests/userobjects/ADFPIMaterialPropertyUserObject/mms.i</a></li><li><a href="#d053e370-fc02-4e1c-9af7-0fd3a6c0dd25" class="modal-trigger">test/tests/fpi/decoupled.i</a></li><li><a href="#ad083391-fdf4-4ae8-b6b0-5d3b0391b992" class="modal-trigger">test/tests/userobjects/ADFPIMaterialPropertyUserObject/mms2.i</a></li><li><a href="#e0fda7fc-4064-4487-932d-3131e6397937" class="modal-trigger">benchmarks/bazant/1D.i</a></li><li><a href="#2e6905bd-a41f-4398-84d8-b044f77b7595" class="modal-trigger">benchmarks/kalthoff/mechanical_fracture.i</a></li></ul><div class="modal moose-modal" id="ff952193-9780-489c-87cb-2852c49a2276"><div class="modal-content"><h4>test/tests/fpi/loosely_coupled.i</h4><pre class="moose-pre"><code class="language-text">[Problem]
  type = FixedPointProblem
[]

[Mesh]
  [./gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 10
    ny = 10
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./d]
  [../]
[]

[AuxVariables]
  [./bounds_dummy]
  [../]
[]

[UserObjects]
  [./E_driving]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  [../]
[]

[Bounds]
  [./irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  [../]
  [./upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  [../]
  [./pff_barr]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  [../]
  [./pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_driving&#x27;
    lag = false
  [../]
[]

[ICs]
  [./crack]
    type = BrittleDamageIC
    variable = &#x27;d&#x27;
    d0 = 1
    l = 0.2
    x1 = 0
    x2 = 0.5
    y1 = 0.5
    y2 = 0.5
    z1 = 0
    z2 = 0
    bandwidth_multiplier = 3
  [../]
[]

[BCs]
  [./ydisp]
    type = FunctionDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    function = &#x27;t&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.1e5
    poissons_ratio = 0.3
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedElasticPK2Stress_NoSplit
    d = &#x27;d&#x27;
    degradation_mat = &#x27;g&#x27;
  [../]
  [./bulk]
    type = ADGenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate&#x27;
    prop_values = &#x27;0.2 2.7&#x27;
  [../]
  [./local_dissipation]
    type = QuadraticLocalDissipation
    d = &#x27;d&#x27;
  [../]
  [./fracture_properties]
    type = ADFractureMaterial
    local_dissipation_norm = 2
  [../]
  [./degradation]
    type = QuadraticDegradation
    d = &#x27;d&#x27;
  [../]
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels -snes_type&#x27;
  petsc_options_value = &#x27;asm      ilu          200         200                0                     vinewtonrsls&#x27;
  dt = 1e-4
  num_steps = 2

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false

  fp_max_its = 100
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3b783836-652a-40bc-82a2-d35cbb2b5cef"><div class="modal-content"><h4>benchmarks/mode1_initial_damage/mechanical_fracture_uo_quad4.i</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-6
dc = 0.6

[Problem]
  type = FixedPointProblem
[]

[Mesh]
  [square]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
    nx = 26
    ny = 26
  []
[]

[Adaptivity]
  steps = 1
  marker = &#x27;box&#x27;
  max_h_level = 3
  initial_steps = 3
  stop_time = 1.0e-10
  [Markers]
    [box]
      type = BoxMarker
      bottom_left = &#x27;-0.5 -0.04 0&#x27;
      inside = refine
      top_right = &#x27;0.5 0.04 0&#x27;
      outside = do_nothing
    []
  []
[]

[Variables]
  [disp_x]
  []
  [disp_y]
  []
  [d]
  []
[]

[AuxVariables]
  [bounds_dummy]
  []
  [fy]
  []
[]

[UserObjects]
  [E_driving]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  []
[]

[Bounds]
  [irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  []
  [upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  []
[]

[Kernels]
  [solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  []
  [pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  []
  [pff_barrier]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  []
  [pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_driving&#x27;
    lag = false
  []
[]

[BCs]
  [ydisp]
    type = FunctionDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    function = &#x27;t&#x27;
  []
  [xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  []
  [yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  []
[]

[ICs]
  [d]
    type = CohesiveDamageIC
    variable = d
    d0 = 1.0
    l = ${l}
    x1 = -0.5
    y1 = 0
    z1 = 0
    x2 = 0
    y2 = 0
    z2 = 0
  []
[]

[Materials]
  [elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = ${E}
    poissons_ratio = ${nu}
  []
  [strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [stress]
    type = SmallStrainDegradedElasticPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
    d_crit = ${dc}
  []
  [bulk]
    type = ADGenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate critical_fracture_energy&#x27;
    prop_values = &#x27;${l} ${Gc} ${psic}&#x27;
  []
  [local_dissipation]
    type = LinearLocalDissipation
    d = &#x27;d&#x27;
  []
  [fracture_properties]
    type = ADFractureMaterial
    local_dissipation_norm = 8/3
  []
  [degradation]
    type = LorentzDegradation
    d = &#x27;d&#x27;
    residual_degradation = ${k}
  []
[]

[Postprocessors]
  [Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  []
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels &#x27;
                        &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;asm      ilu          200         200                0                     &#x27;
                        &#x27;vinewtonrsls&#x27;
  dt = 1e-4
  end_time = 6e-3

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false

  fp_max_its = 100
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true
[]

[Outputs]
  print_linear_residuals = false
  print_linear_converged_reason = false
  print_nonlinear_converged_reason = false
  [csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
  []
  [exodus]
    type = Exodus
    file_base = &#x27;visualize_tet2&#x27;
  []
  [console]
    type = Console
    outlier_variable_norms = false
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="52a8827e-e87c-4ec2-8d02-07dc51d2e3a5"><div class="modal-content"><h4>benchmarks/sneddon/mechanical_fracture_uo.i</h4><pre class="moose-pre"><code class="language-text">E = 1
nu = 0.2
Gc = 1
l = 0.1
psic = 0
k = 1e-6
dc = 1

[Problem]
  type = FixedPointProblem
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./d]
  [../]
[]

[AuxVariables]
  [./bounds_dummy]
  [../]
[]

[UserObjects]
  [./E_driving]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  [../]
  [./pressure_uo]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;p&#x27;
  [../]
[]

[Bounds]
  [./irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  [../]
  [./upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./pressure_body_force_x]
    type = ADPressurizedCrack
    variable = &#x27;disp_x&#x27;
    d = &#x27;d&#x27;
    pressure_mat = &#x27;p&#x27;
    component = 0
  [../]
  [./pressure_body_force_y]
    type = ADPressurizedCrack
    variable = &#x27;disp_y&#x27;
    d = &#x27;d&#x27;
    pressure_mat = &#x27;p&#x27;
    component = 1
  [../]
  [./pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  [../]
  [./pff_barrier]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  [../]
  [./pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_driving&#x27;
    lag = false
  [../]
  [./pff_pressure]
    type = ADPFFPressure
    variable = &#x27;d&#x27;
    pressure_uo = &#x27;pressure_uo&#x27;
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
[]

[BCs]
  [./xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom left right&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top bottom left right&#x27;
    value = 0
  [../]
[]

[ICs]
  [./d]
    type = BrittleDamageIC
    variable = d
    d0 = 1.0
    l = ${l}
    x1 = -0.2
    y1 = 0
    z1 = 0
    x2 = 0.2
    y2 = 0
    z2 = 0
  [../]
[]

[Materials]
  [./pressure]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;p&#x27;
    prop_values = &#x27;1e-3&#x27;
  [../]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = ${E}
    poissons_ratio = ${nu}
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedElasticPK2Stress_NoSplit
    d = &#x27;d&#x27;
    d_crit = ${dc}
  [../]
  [./bulk]
    type = GenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate critical_fracture_energy&#x27;
    prop_values = &#x27;${l} ${Gc} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = QuadraticLocalDissipation
    d = &#x27;d&#x27;
  [../]
  [./fracture_properties]
    type = FractureMaterial
    local_dissipation_norm = 2
  [../]
  [./degradation]
    type = QuadraticDegradation
    d = &#x27;d&#x27;
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels -snes_type&#x27;
  petsc_options_value = &#x27;asm      ilu          200         200                0                     vinewtonrsls&#x27;
  dt = 1e-4
  end_time = 2e-4

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false

  fp_max_its = 100
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true
[]

[Outputs]
  print_linear_residuals = false
  [./exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
  [../]
  [./console]
    type = Console
    outlier_variable_norms = false
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e4968d0c-b02a-4d59-a7cc-89dc7ba56065"><div class="modal-content"><h4>benchmarks/fixed_point_iteration/mechanical_fracture_var.i</h4><pre class="moose-pre"><code class="language-text">[Problem]
  type = FixedPointProblem
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [disp_x]
  []
  [disp_y]
  []
  [d]
  []
[]

[AuxVariables]
  [E_driving]
    order = CONSTANT
    family = MONOMIAL
  []
  [bounds_dummy]
  []
  [fy]
  []
[]

[AuxKernels]
  [lag_E_driving]
    type = ADFPIMaterialPropertyAux
    variable = &#x27;E_driving&#x27;
    from = &#x27;E_el_active&#x27;
  []
[]

[Bounds]
  [irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  []
  [upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  []
[]

[Kernels]
  [solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  []
  [pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  []
  [pff_barr]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  []
  [pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_var = &#x27;E_driving&#x27;
    lag = false
  []
[]

[BCs]
  [ydisp]
    type = FunctionDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    function = &#x27;t&#x27;
  []
  [xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  []
  [yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  []
[]

[Materials]
  [elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.1e5
    poissons_ratio = 0.3
  []
  [strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [stress]
    type = SmallStrainDegradedElasticPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
    d_crit = 2.0
  []
  [bulk]
    type = ADGenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate critical_fracture_energy&#x27;
    prop_values = &#x27;0.015 2.7 14.88&#x27;
  []
  [local_dissipation]
    type = LinearLocalDissipation
    d = &#x27;d&#x27;
  []
  [fracture_properties]
    type = ADFractureMaterial
    local_dissipation_norm = 8/3
  []
  [degradation]
    type = LorentzDegradation
    d = &#x27;d&#x27;
    residual_degradation = 1e-09
  []
[]

[Postprocessors]
  [Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  []
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels &#x27;
                        &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;asm      ilu          200         200                0                     &#x27;
                        &#x27;vinewtonrsls&#x27;
  dt = 1e-4
  end_time = 6e-3

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false

  fp_max_its = 100
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true
[]

[Outputs]
  print_linear_residuals = false
  print_linear_converged_reason = false
  print_nonlinear_converged_reason = false
  [csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
  []
  [exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
    hide = &#x27;E_driving&#x27;
  []
  [console]
    type = Console
    outlier_variable_norms = false
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="84c6a112-6aaf-4182-b603-ce0b22012ec2"><div class="modal-content"><h4>benchmarks/mode1_initial_damage/mechanical_fracture_uo_tri3.i</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-6
dc = 0.6

[Problem]
  type = FixedPointProblem
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [disp_x]
  []
  [disp_y]
  []
  [d]
  []
[]

[AuxVariables]
  [bounds_dummy]
  []
  [fy]
  []
[]

[UserObjects]
  [E_driving]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  []
[]

[Bounds]
  [irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  []
  [upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  []
[]

[Kernels]
  [solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  []
  [pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  []
  [pff_barrier]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  []
  [pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_driving&#x27;
    lag = false
  []
[]

[BCs]
  [ydisp]
    type = FunctionDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    function = &#x27;t&#x27;
  []
  [xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  []
  [yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  []
[]

[ICs]
  [d]
    type = CohesiveDamageIC
    variable = d
    d0 = 1.0
    l = ${l}
    x1 = -0.5
    y1 = 0
    z1 = 0
    x2 = 0
    y2 = 0
    z2 = 0
  []
[]

[Materials]
  [elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = ${E}
    poissons_ratio = ${nu}
  []
  [strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [stress]
    type = SmallStrainDegradedElasticPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
    d_crit = ${dc}
  []
  [bulk]
    type = ADGenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate critical_fracture_energy&#x27;
    prop_values = &#x27;${l} ${Gc} ${psic}&#x27;
  []
  [local_dissipation]
    type = LinearLocalDissipation
    d = &#x27;d&#x27;
  []
  [fracture_properties]
    type = ADFractureMaterial
    local_dissipation_norm = 8/3
  []
  [degradation]
    type = LorentzDegradation
    d = &#x27;d&#x27;
    residual_degradation = ${k}
  []
[]

[Postprocessors]
  [Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  []
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels &#x27;
                        &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;asm      ilu          200         200                0                     &#x27;
                        &#x27;vinewtonrsls&#x27;
  dt = 1e-4
  end_time = 6e-3

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false

  fp_max_its = 100
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true
[]

[Outputs]
  print_linear_residuals = false
  print_linear_converged_reason = false
  print_nonlinear_converged_reason = false
  [csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
  []
  [exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
  []
  [console]
    type = Console
    outlier_variable_norms = false
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7518731c-47e3-4928-a3fd-c9cb242ed330"><div class="modal-content"><h4>benchmarks/bazant/2D.i</h4><pre class="moose-pre"><code class="language-text">E = 1e-6
rho = 1e-12
nu = 0.3

psic = 1.125e-6
Gc = 0.45e-3
l = 30

[Problem]
  type = FixedPointProblem
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  [gmg]
    type = FileMeshGenerator
    file = &#x27;mesh/geo.msh&#x27;
  []
[]

[UserObjects]
  [E_el_active]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  []
[]

[Variables]
  [disp_x]
  []
  [disp_y]
  []
  [d]
  []
[]

[AuxVariables]
  [stress_xx]
    order = CONSTANT
    family = MONOMIAL
  []
  [stress_xy]
    order = CONSTANT
    family = MONOMIAL
  []
  [stress_yy]
    order = CONSTANT
    family = MONOMIAL
  []
  [hmin]
    order = CONSTANT
    family = MONOMIAL
  []
  [hmax]
    order = CONSTANT
    family = MONOMIAL
  []
  [bounds_dummy]
  []
  [accel_x]
  []
  [accel_y]
  []
  [vel_x]
  []
  [vel_y]
  []
[]

[Bounds]
  [irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  []
  [upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  []
[]

[Kernels]
  [solid_x]
    type = ADStressDivergenceTensors
    variable = disp_x
    component = 0
  []
  [solid_y]
    type = ADStressDivergenceTensors
    variable = disp_y
    component = 1
  []
  [inertia_x]
    type = InertialForce
    variable = disp_x
    density = &#x27;reg_density&#x27;
  []
  [inertia_y]
    type = InertialForce
    variable = disp_y
    density = &#x27;reg_density&#x27;
  []

  [pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  []
  [pff_barr]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  []
  [pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_el_active&#x27;
  []
[]

[AuxKernels]
  [stressxx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = TIMESTEP_END
  []
  [stressxy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = TIMESTEP_END
  []
  [stressyy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = TIMESTEP_END
  []
  [min_h]
    type = ElementLengthAux
    variable = &#x27;hmin&#x27;
    method = min
    execute_on = &#x27;INITIAL&#x27;
  []
  [max_h]
    type = ElementLengthAux
    variable = &#x27;hmax&#x27;
    method = max
    execute_on = &#x27;INITIAL&#x27;
  []
  [ax]
    type = NewmarkAccelAux
    variable = &#x27;accel_x&#x27;
    displacement = &#x27;disp_x&#x27;
    velocity = &#x27;vel_x&#x27;
    beta = 0.25
    execute_on = &#x27;TIMESTEP_END&#x27;
  []
  [ay]
    type = NewmarkAccelAux
    variable = &#x27;accel_y&#x27;
    displacement = &#x27;disp_y&#x27;
    velocity = &#x27;vel_y&#x27;
    beta = 0.25
    execute_on = &#x27;TIMESTEP_END&#x27;
  []
  [vx]
    type = NewmarkVelAux
    variable = &#x27;vel_x&#x27;
    acceleration = &#x27;accel_x&#x27;
    gamma = 0.5
    execute_on = &#x27;TIMESTEP_END&#x27;
  []
  [yx]
    type = NewmarkVelAux
    variable = &#x27;vel_y&#x27;
    acceleration = &#x27;accel_y&#x27;
    gamma = 0.5
    execute_on = &#x27;TIMESTEP_END&#x27;
  []
[]

[Materials]
  [const]
    type = ADGenericConstantMaterial
    prop_names = &#x27;density phase_field_regularization_length energy_release_rate &#x27;
                 &#x27;critical_fracture_energy&#x27;
    prop_values = &#x27;${rho} ${l} ${Gc} ${psic}&#x27;
  []
  [elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = &#x27;${E}&#x27;
    poissons_ratio = &#x27;${nu}&#x27;
  []
  [stress]
    type = SmallStrainDegradedElasticPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
  []
  [strain]
    type = ADComputeSmallStrain
  []
  [local_dissipation]
    type = LinearLocalDissipation
    d = &#x27;d&#x27;
  []
  [fracture_properties]
    type = ADFractureMaterial
    local_dissipation_norm = 8/3
  []
  [degradation]
    type = LorentzDegradation
    d = &#x27;d&#x27;
    residual_degradation = 0
  []
  [reg_density]
    type = MaterialConverter
    ad_props_in = &#x27;density&#x27;
    reg_props_out = &#x27;reg_density&#x27;
  []
[]

[BCs]
  [left]
    type = ADPressure
    boundary = left
    variable = &#x27;disp_x&#x27;
    component = 0
    function = &#x27;if(t &lt; 1, -1e-6, 0)&#x27;
  []
  [right]
    type = ADPressure
    boundary = right
    variable = &#x27;disp_x&#x27;
    component = 0
    function = &#x27;if(t &lt; 1, -1e-6, 0)&#x27;
  []
  [fix_y]
    type = ADDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;center left right&#x27;
    value = 0.0
  []
[]

[Postprocessors]
  [strain_energy]
    type = ADStrainEnergy
  []
  [active_strain_energy]
    type = ADElementIntegralMaterialProperty
    mat_prop = &#x27;E_el_active&#x27;
  []
  [kinetic_energy]
    type = ADKineticEnergy
  []
  [fracture_energy]
    type = ADFractureEnergy
    d = &#x27;d&#x27;
  []
  [fpi]
    type = FPIterations
  []
  [explicit_dt]
    type = ADBetterCriticalTimeStep
    density_name = &#x27;density&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN TIMESTEP_END&#x27;
  []
[]

[Executioner]
  type = FixedPointTransient
  dt = 50e-3
  num_steps = 400
  solve_type = &#x27;NEWTON&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package -snes_type&#x27;
  petsc_options_value = &#x27;lu       superlu_dist                  vinewtonrsls&#x27;

  nl_abs_tol = 1e-6
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100

  accept_on_max_fp_iteration = false
  fp_max_its = 1000
  fp_tol = 1e-6

  [TimeIntegrator]
    type = NewmarkBeta
  []
[]

[Outputs]
  print_linear_residuals = false
  print_linear_converged_reason = false
  print_nonlinear_converged_reason = false
  [Exodus]
    type = Exodus
    file_base = &#x27;mechanical_fracture_2d&#x27;
    output_material_properties = true
    show_material_properties = &#x27;E_el_active&#x27;
  []
  [Console]
    type = Console
    outlier_variable_norms = false
    interval = 10
  []
  [CSV]
    type = CSV
    file_base = &#x27;mechanical_fracture_2d_energies&#x27;
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3ac23960-7f32-4fbb-b6fc-9f0d4aa35a50"><div class="modal-content"><h4>benchmarks/fixed_point_iteration/mechanical_fracture_uo.i</h4><pre class="moose-pre"><code class="language-text">[Problem]
  type = FixedPointProblem
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [disp_x]
  []
  [disp_y]
  []
  [d]
  []
[]

[AuxVariables]
  [bounds_dummy]
  []
  [fy]
  []
[]

[UserObjects]
  [E_driving]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  []
[]

[Bounds]
  [irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  []
  [upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  []
[]

[Kernels]
  [solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  []
  [pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  []
  [pff_barr]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  []
  [pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_driving&#x27;
    lag = false
  []
[]

[BCs]
  [ydisp]
    type = FunctionDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    function = &#x27;t&#x27;
  []
  [xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  []
  [yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  []
[]

[Materials]
  [elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.1e5
    poissons_ratio = 0.3
  []
  [strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [stress]
    type = SmallStrainDegradedElasticPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
    d_crit = 2.0
  []
  [bulk]
    type = ADGenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate critical_fracture_energy&#x27;
    prop_values = &#x27;0.015 2.7 14.88&#x27;
  []
  [local_dissipation]
    type = LinearLocalDissipation
    d = &#x27;d&#x27;
  []
  [fracture_properties]
    type = ADFractureMaterial
    local_dissipation_norm = 8/3
  []
  [degradation]
    type = LorentzDegradation
    d = &#x27;d&#x27;
    residual_degradation = 1e-09
  []
[]

[Postprocessors]
  [Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  []
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels &#x27;
                        &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;asm      ilu          200         200                0                     &#x27;
                        &#x27;vinewtonrsls&#x27;
  dt = 1e-4
  end_time = 6e-3

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false

  fp_max_its = 100
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true
[]

[Outputs]
  print_linear_residuals = false
  print_linear_converged_reason = false
  print_nonlinear_converged_reason = false
  [csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
  []
  [exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
  []
  [console]
    type = Console
    outlier_variable_norms = false
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a1f1fc3f-46e4-4ef2-992a-00bb84b80f2f"><div class="modal-content"><h4>benchmarks/shockwave_lithotripsy/elastodynamic_exp.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = FixedPointProblem
[]

[Mesh]
   [./fmg]
     type = FileMeshGenerator
     file = &#x27;gold/innermesh.msh&#x27;
   [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./d]
  [../]
[]

[AuxVariables]
  [./accel_x]
  [../]
  [./accel_y]
  [../]
  [./pre_wave]
  [../]
  [./stress_h]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_VonMises]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./bounds_dummy]
  [../]
[]

[UserObjects]
  [./E_driving]
    type = FPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  [../]
[]

[Bounds]
  [./irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  [../]
  [./upper_bound]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_value = 1
  [../]
[]

[Kernels]
  [./solid_x]
     type = ADStressDivergenceExpTensors
     variable = &#x27;disp_x&#x27;
     displacements = &#x27;disp_x disp_y&#x27;
     component = 0
  [../]
  [./solid_y]
     type = ADStressDivergenceExpTensors
     variable = &#x27;disp_y&#x27;
     displacements = &#x27;disp_x disp_y&#x27;
     component = 1
  [../]
  [./inertia_x]
    type = ExplicitInertialForce
    variable = &#x27;disp_x&#x27;
  [../]
  [./inertia_y]
    type = ExplicitInertialForce
    variable = &#x27;disp_y&#x27;
  [../]
  [./pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  [../]
  [./pff_barr]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  [../]
  [./pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_driving&#x27;
    lag = false
  [../]
[]

[AuxKernels]
  [./accel_x]
    type = ExplicitAccelAux
    variable = &#x27;accel_x&#x27;
    displacement = &#x27;disp_x&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
  [./accel_y]
    type = ExplicitAccelAux
    variable = &#x27;accel_y&#x27;
    displacement = &#x27;disp_y&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
  # [./stress_h]
  #   type = RankTwoScalarAux
  #   rank_two_tensor = &#x27;stress&#x27;
  #   variable = &#x27;stress_h&#x27;
  #   scalar_type = Hydrostatic
  #   execute_on = &#x27;TIMESTEP_END&#x27;
  # [../]
  # [./stress_VonMises]
  #   type = RankTwoScalarAux
  #   rank_two_tensor = &#x27;stress&#x27;
  #   variable = &#x27;stress_VonMises&#x27;
  #   scalar_type = VonMisesStress
  #   execute_on = &#x27;TIMESTEP_END&#x27;
  # [../]
[]

[BCs]
  [./top_y]
    type = CoupledNeumannBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    coupled_var = &#x27;pre_wave&#x27;
  [../]
  [./right_x]
    type = CoupledNeumannBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;right&#x27;
    coupled_var = &#x27;pre_wave&#x27;
  [../]
  [./left_x]
    type = CoupledNeumannBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;left&#x27;
    coupled_var = &#x27;pre_wave&#x27;
  [../]
  [./bottom_y]
    type = CoupledNeumannBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    coupled_var = &#x27;pre_wave&#x27;
  [../]
[]

[Materials]
  [./density]
    type = GenericConstantMaterial
    prop_names = &#x27;density&#x27;
    prop_values = &#x27;1.995e-3&#x27;
  [../]
  [./Elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.01305 0.01073&#x27;
  [../]
  [./strain]
    type = ADComputeSmallStrain
  [../]
  [./stress]
    type = SmallStrainDegradedElasticPK2Stress_StrainVolDev
    d = &#x27;d&#x27;
    d_crit = 2.0
  [../]

  [./bulk]
    type = GenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate critical_fracture_energy&#x27;
    prop_values = &#x27;0.004 5.226e-10 1.8e-9&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = &#x27;d&#x27;
  [../]
  [./fracture_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = &#x27;d&#x27;
    residual_degradation = 1e-09
  [../]
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -ksp_grmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap -snes_type&#x27;
  petsc_options_value = &#x27;asm      31                  preonly       lu           1               vinewtonrsls&#x27;

  start_time = 0
  end_time = 3.0
  l_max_its = 50
  nl_max_its = 20

  l_tol = 1e-12
  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-8
  dt = 1e-3

  fp_max_its = 2
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true

  automatic_scaling = true
[]

[Outputs]
  [./exodus]
    type = Exodus
    file_base = DispOut
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="27d156e5-07e4-46f5-ac57-eccb87212365"><div class="modal-content"><h4>test/tests/userobjects/ADFPIMaterialPropertyUserObject/mms.i</h4><pre class="moose-pre"><code class="language-text"># This input file defines a coupled PDE system:
# - (g(d) * u,x),x - b1 = 0
# - d,xx - u - b2 = 0
# g(d) = (1- d) ^ 2
# b1 = - 4 * x ^ 3 + 6 * x ^ 2 - 6 * x + 2
# b2 = - x + 2
# u(0) = 0, u(1) = 1
# v(0) = 0, v(1) = 0
# u = x, d = - x ^ 2 + x
# Each step the mesh is uniformly refined once.
# The manufactured solution should have a convergence order of 2.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 1
[]

[Adaptivity]
  marker = &#x27;box&#x27;
  [./Markers]
    [./box]
      type = BoxMarker
      bottom_left = &#x27;0 0 0&#x27;
      top_right = &#x27;1 1 0 &#x27;
      inside = &#x27;refine&#x27;
      outside = &#x27;do_nothing&#x27;
    [../]
  [../]
[]

[Problem]
  type = FixedPointProblem
[]

[UserObjects]
  [./coupled_u]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;coupled_u&#x27;
  [../]
[]

[Variables]
  [./u]
  [../]
  [./d]
  [../]
[]

[Functions]
  [./solution_u]
    type = ParsedFunction
    value = &#x27;x&#x27;
  [../]
  [./solution_d]
    type = ParsedFunction
    value = &#x27;-x^2+x&#x27;
  [../]
[]

[Kernels]
  [./diff_u]
    type = ADCoefMatDiffusion
    variable = &#x27;u&#x27;
    prop_names = &#x27;g&#x27;
  [../]
  [./body_u]
    type = BodyForce
    variable = &#x27;u&#x27;
    function = &#x27;-4*x^3+6*x^2-6*x+2&#x27;
  [../]
  [./diff_d]
    type = Diffusion
    variable = &#x27;d&#x27;
  [../]
  [./source_d]
    type = ADMaterialPropertyUserObjectSource
    variable = &#x27;d&#x27;
    uo_name = &#x27;coupled_u&#x27;
    coef = -1
  [../]
  [./body_d]
    type = BodyForce
    variable = &#x27;d&#x27;
    function = &#x27;-x+2&#x27;
  [../]
[]

[BCs]
  [./left_u]
    type = FunctionDirichletBC
    variable = &#x27;u&#x27;
    boundary = &#x27;left&#x27;
    function = &#x27;solution_u&#x27;
  [../]
  [./right_u]
    type = FunctionDirichletBC
    variable = &#x27;u&#x27;
    boundary = &#x27;right&#x27;
    function = &#x27;solution_u&#x27;
  [../]
  [./left_d]
    type = FunctionDirichletBC
    variable = &#x27;d&#x27;
    boundary = &#x27;left&#x27;
    function = &#x27;solution_d&#x27;
  [../]
  [./right_d]
    type = FunctionDirichletBC
    variable = &#x27;d&#x27;
    boundary = &#x27;right&#x27;
    function = &#x27;solution_d&#x27;
  [../]
[]

[Materials]
  [./v]
    type = QuadraticDegradation
    d = &#x27;d&#x27;
    residual_degradation = 0
  [../]
  [./u]
    type = LinearLocalDissipation
    local_dissipation_name = &#x27;coupled_u&#x27;
    d = &#x27;u&#x27;
  [../]
[]

[Postprocessors]
  [./l2error]
    type = ElementL2Error
    variable = &#x27;d&#x27;
    function = &#x27;solution_d&#x27;
  [../]
  [./nl_its]
    type = NumNonlinearIterations
    accumulate_over_step = true
  [../]
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  num_steps = 5

  fp_max_its = 10
  fp_tol = 1e-06

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-08
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d053e370-fc02-4e1c-9af7-0fd3a6c0dd25"><div class="modal-content"><h4>test/tests/fpi/decoupled.i</h4><pre class="moose-pre"><code class="language-text">[Problem]
  type = FixedPointProblem
[]

[Mesh]
  [./gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 10
    ny = 10
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./d]
  [../]
[]

[AuxVariables]
  [./bounds_dummy]
  [../]
[]

[UserObjects]
  [./E_driving]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  [../]
  [./g]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;g&#x27;
  [../]
[]

[Bounds]
  [./irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  [../]
  [./upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  [../]
  [./pff_barr]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  [../]
  [./pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_driving&#x27;
    lag = false
  [../]
[]

[ICs]
  [./crack]
    type = BrittleDamageIC
    variable = &#x27;d&#x27;
    d0 = 1
    l = 0.2
    x1 = 0
    x2 = 0.5
    y1 = 0.5
    y2 = 0.5
    z1 = 0
    z2 = 0
    bandwidth_multiplier = 3
  [../]
[]

[BCs]
  [./ydisp]
    type = FunctionDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    function = &#x27;t&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.1e5
    poissons_ratio = 0.3
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedElasticPK2Stress_NoSplit
    d = &#x27;d&#x27;
    degradation_uo = &#x27;g&#x27;
  [../]
  [./bulk]
    type = ADGenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate&#x27;
    prop_values = &#x27;0.2 2.7&#x27;
  [../]
  [./local_dissipation]
    type = QuadraticLocalDissipation
    d = &#x27;d&#x27;
  [../]
  [./fracture_properties]
    type = ADFractureMaterial
    local_dissipation_norm = 2
  [../]
  [./degradation]
    type = QuadraticDegradation
    d = &#x27;d&#x27;
  [../]
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels -snes_type&#x27;
  petsc_options_value = &#x27;asm      ilu          200         200                0                     vinewtonrsls&#x27;
  dt = 1e-4
  num_steps = 2

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false

  fp_max_its = 100
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ad083391-fdf4-4ae8-b6b0-5d3b0391b992"><div class="modal-content"><h4>test/tests/userobjects/ADFPIMaterialPropertyUserObject/mms2.i</h4><pre class="moose-pre"><code class="language-text"># This input file defines a coupled PDE system:
# - (g(d) * u,x),x - b1 = 0
# - d,xx - u - b2 = 0
# g(d) = (1- d) ^ 2
# b1 = - 4 * x ^ 3 + 6 * x ^ 2 - 6 * x + 2
# b2 = - x + 2
# u(0) = 0, u(1) = 1
# v(0) = 0, v(1) = 0
# u = x, d = - x ^ 2 + x
# Each step the mesh is uniformly refined once.
# The manufactured solution should have a convergence order of 2.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 1
[]

[Adaptivity]
  marker = &#x27;box&#x27;
  [./Markers]
    [./box]
      type = BoxMarker
      bottom_left = &#x27;0 0 0&#x27;
      top_right = &#x27;1 1 0 &#x27;
      inside = &#x27;refine&#x27;
      outside = &#x27;do_nothing&#x27;
    [../]
  [../]
[]

[Problem]
  type = FixedPointProblem
[]

[UserObjects]
  [./coupled_u]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;coupled_u&#x27;
  [../]
  [./g]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;g&#x27;
  [../]
[]

[Variables]
  [./u]
  [../]
  [./d]
  [../]
[]

[Functions]
  [./solution_u]
    type = ParsedFunction
    value = &#x27;x&#x27;
  [../]
  [./solution_d]
    type = ParsedFunction
    value = &#x27;-x^2+x&#x27;
  [../]
[]

[Kernels]
  [./diff_u]
    type = ADMaterialPropertyUserObjectDiffusion
    variable = &#x27;u&#x27;
    uo_name = &#x27;g&#x27;
  [../]
  [./body_u]
    type = BodyForce
    variable = &#x27;u&#x27;
    function = &#x27;-4*x^3+6*x^2-6*x+2&#x27;
  [../]
  [./diff_d]
    type = Diffusion
    variable = &#x27;d&#x27;
  [../]
  [./source_d]
    type = ADMaterialPropertyUserObjectSource
    variable = &#x27;d&#x27;
    uo_name = &#x27;coupled_u&#x27;
    coef = -1
  [../]
  [./body_d]
    type = BodyForce
    variable = &#x27;d&#x27;
    function = &#x27;-x+2&#x27;
  [../]
[]

[BCs]
  [./left_u]
    type = FunctionDirichletBC
    variable = &#x27;u&#x27;
    boundary = &#x27;left&#x27;
    function = &#x27;solution_u&#x27;
  [../]
  [./right_u]
    type = FunctionDirichletBC
    variable = &#x27;u&#x27;
    boundary = &#x27;right&#x27;
    function = &#x27;solution_u&#x27;
  [../]
  [./left_d]
    type = FunctionDirichletBC
    variable = &#x27;d&#x27;
    boundary = &#x27;left&#x27;
    function = &#x27;solution_d&#x27;
  [../]
  [./right_d]
    type = FunctionDirichletBC
    variable = &#x27;d&#x27;
    boundary = &#x27;right&#x27;
    function = &#x27;solution_d&#x27;
  [../]
[]

[Materials]
  [./v]
    type = QuadraticDegradation
    d = &#x27;d&#x27;
    residual_degradation = 0
  [../]
  [./u]
    type = LinearLocalDissipation
    local_dissipation_name = &#x27;coupled_u&#x27;
    d = &#x27;u&#x27;
  [../]
[]

[Postprocessors]
  [./l2error]
    type = ElementL2Error
    variable = &#x27;d&#x27;
    function = &#x27;solution_d&#x27;
  [../]
  [./nl_its]
    type = NumNonlinearIterations
    accumulate_over_step = true
  [../]
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  num_steps = 5

  fp_max_its = 10
  fp_tol = 1e-06

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-08
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e0fda7fc-4064-4487-932d-3131e6397937"><div class="modal-content"><h4>benchmarks/bazant/1D.i</h4><pre class="moose-pre"><code class="language-text">E = 1
rho = 1
nu = 0

psic = 1.125
Gc = 0.45
l = 0.05

[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 1
    xmin = -1
    xmax = 1
    nx = 400
  []
[]

[Problem]
  type = FixedPointProblem
[]

[GlobalParams]
  displacements = &#x27;disp_x&#x27;
[]

[UserObjects]
  [E_el_active]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  []
[]

[Variables]
  [disp_x]
  []
  [d]
  []
[]

[AuxVariables]
  [stress]
    order = CONSTANT
    family = MONOMIAL
  []
  [bounds_dummy]
  []
[]

[Bounds]
  [irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  []
  [upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  []
[]

[Kernels]
  [solid_x]
    type = ADStressDivergenceTensors
    variable = disp_x
    component = 0
  []
  [inertia_x]
    type = InertialForce
    variable = disp_x
    density = &#x27;reg_density&#x27;
  []

  [pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  []
  [pff_barr]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  []
  [pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_el_active&#x27;
  []
[]

[AuxKernels]
  [stress]
    type = ADRankTwoAux
    rank_two_tensor = stress
    variable = stress
    index_i = 0
    index_j = 0
  []
[]

[Materials]
  [const]
    type = ADGenericConstantMaterial
    prop_names = &#x27;density energy_release_rate phase_field_regularization_length &#x27;
                 &#x27;critical_fracture_energy&#x27;
    prop_values = &#x27;${rho} ${Gc} ${l} ${psic}&#x27;
  []
  [elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = &#x27;${E}&#x27;
    poissons_ratio = &#x27;${nu}&#x27;
  []
  [stress]
    type = SmallStrainDegradedElasticPK2Stress_NoSplit
    d = &#x27;d&#x27;
  []
  [strain]
    type = ADComputeSmallStrain
  []
  [local_dissipation]
    type = LinearLocalDissipation
    d = &#x27;d&#x27;
  []
  [fracture_properties]
    type = ADFractureMaterial
    local_dissipation_norm = 8/3
  []
  [degradation]
    type = LorentzDegradation
    d = &#x27;d&#x27;
    residual_degradation = 0
  []
  [reg_density]
    type = MaterialConverter
    ad_props_in = &#x27;density&#x27;
    reg_props_out = &#x27;reg_density&#x27;
  []
[]

[BCs]
  [left]
    type = ADPressure
    boundary = left
    variable = &#x27;disp_x&#x27;
    component = 0
    constant = &#x27;-1&#x27;
  []
  [right]
    type = ADPressure
    boundary = right
    variable = &#x27;disp_x&#x27;
    component = 0
    constant = &#x27;-1&#x27;
  []
[]

[Postprocessors]
  [strain_energy]
    type = ADStrainEnergy
  []
  [active_strain_energy]
    type = ADElementIntegralMaterialProperty
    mat_prop = &#x27;E_el_active&#x27;
  []
  [kinetic_energy]
    type = ADKineticEnergy
  []
  [fracture_energy]
    type = ADFractureEnergy
    d = &#x27;d&#x27;
  []
  [fpi]
    type = FPIterations
  []
  [explicit_dt]
    type = ADBetterCriticalTimeStep
    density_name = &#x27;density&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN TIMESTEP_END&#x27;
  []
[]

[Executioner]
  type = FixedPointTransient
  dt = 0.005
  num_steps = 1000
  solve_type = &#x27;NEWTON&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package -snes_type&#x27;
  petsc_options_value = &#x27;lu       superlu_dist                  vinewtonrsls&#x27;

  nl_abs_tol = 1e-6
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100

  fp_max_its = 10
  fp_tol = 1e-2

  [TimeIntegrator]
    type = NewmarkBeta
  []
[]

[Outputs]
  print_linear_residuals = false
  print_linear_converged_reason = false
  print_nonlinear_converged_reason = false
  [Exodus]
    type = Exodus
    file_base = &#x27;mechanical_fracture_1d&#x27;
    output_material_properties = true
    show_material_properties = &#x27;E_el_active&#x27;
  []
  [Console]
    type = Console
    outlier_variable_norms = false
    interval = 10
  []
  [csv]
    type = CSV
    file_base = &#x27;mechanical_fracture_1d_energies&#x27;
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2e6905bd-a41f-4398-84d8-b044f77b7595"><div class="modal-content"><h4>benchmarks/kalthoff/mechanical_fracture.i</h4><pre class="moose-pre"><code class="language-text">[Problem]
  type = FixedPointProblem
[]

[UserObjects]
  [E_el_active]
    type = ADFPIMaterialPropertyUserObject
    mat_prop = &#x27;E_el_active&#x27;
  []
[]

[Mesh]
  [fmg]
    type = FileMeshGenerator
    file = &#x27;gold/half_notched_plate_65.msh&#x27;
  []
[]

[Variables]
  [disp_x]
  []
  [disp_y]
  []
  [d]
  []
[]

[AuxVariables]
  [stress]
    order = CONSTANT
    family = MONOMIAL
  []
  [bounds_dummy]
  []
[]

[AuxKernels]
  [stress]
    type = ADRankTwoScalarAux
    variable = &#x27;stress&#x27;
    rank_two_tensor = &#x27;stress&#x27;
    scalar_type = &#x27;MaxPrincipal&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  []
[]

[Bounds]
  [irreversibility]
    type = VariableOldValueBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = lower
  []
  [upper]
    type = ConstantBoundsAux
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    bound_type = upper
    bound_value = 1
  []
[]

[Kernels]
  [inertia_x]
    type = InertialForce
    variable = &#x27;disp_x&#x27;
    density = &#x27;reg_density&#x27;
  []
  [inertia_y]
    type = InertialForce
    variable = &#x27;disp_y&#x27;
    density = &#x27;reg_density&#x27;
  []
  [solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [pff_diff]
    type = ADPFFDiffusion
    variable = &#x27;d&#x27;
  []
  [pff_barr]
    type = ADPFFBarrier
    variable = &#x27;d&#x27;
  []
  [pff_react]
    type = ADPFFReaction
    variable = &#x27;d&#x27;
    driving_energy_uo = &#x27;E_el_active&#x27;
  []
[]

[BCs]
  [xdisp]
    type = FunctionDirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;load&#x27;
    function = &#x27;if(t&lt;1e-6, 0.5*1.65e10*t*t, 1.65e4*t-0.5*1.65e-2)&#x27;
    preset = false
  []
  [y_bot]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = &#x27;0&#x27;
  []
[]

[Materials]
  [bulk]
    type = ADGenericConstantMaterial
    prop_names = &#x27;density phase_field_regularization_length energy_release_rate &#x27;
                 &#x27;critical_fracture_energy&#x27;
    prop_values = &#x27;8e-9 0.35 22.2 7.9&#x27;
  []
  [elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1.9e5
    poissons_ratio = 0.3
  []
  [strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  []
  [stress]
    type = SmallStrainDegradedElasticPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
  []
  [local_dissipation]
    type = LinearLocalDissipation
    d = &#x27;d&#x27;
  []
  [fracture_properties]
    type = ADFractureMaterial
    local_dissipation_norm = 8/3
  []
  [degradation]
    type = LorentzDegradation
    d = &#x27;d&#x27;
    residual_degradation = 1e-09
  []
  [reg_density]
    type = MaterialConverter
    ad_props_in = &#x27;density&#x27;
    reg_props_out = &#x27;reg_density&#x27;
  []
[]

[Executioner]
  type = FixedPointTransient
  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package -snes_type&#x27;
  petsc_options_value = &#x27;lu       superlu_dist                  vinewtonrsls&#x27;
  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06
  automatic_scaling = true
  dt = 5e-7
  end_time = 9e-5
  fp_max_its = 20
  fp_tol = 1e-03
  [TimeIntegrator]
    type = NewmarkBeta
  []
[]

[Outputs]
  print_linear_residuals = false
  print_linear_converged_reason = false
  print_nonlinear_converged_reason = false
  file_base = &#x27;visualize_implicit&#x27;
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#bd3cc3d4-ea29-49c1-8cef-abae9b1035a8" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#c1a385ef-e0e6-4d9c-b47b-b9f67de5a8bd" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>