<!DOCTYPE html><head><meta charset="UTF-8"><title>GridPartitioner.md|RACCOON</title><link rel="icon" type="image/x-icon" href="../../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://hugary1995.github.io/raccoon/index.html" class="left moose-logo hide-on-med-and-down">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="../../install/index.html">Install</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../../syntax/index.html">Syntax</a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="2cdf233d-ac34-4b4a-8f54-9d684d40a6c0"><i class="material-icons">menu</i></a><ul class="sidenav" id="2cdf233d-ac34-4b4a-8f54-9d684d40a6c0"><li><a href="../../install/index.html">Install</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../../syntax/index.html">Syntax</a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="https://hugary1995.github.io/raccoon/index.html" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">partitioner</span><a href="#" class="breadcrumb">GridPartitioner</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="3eb4af2d-b6a5-477c-91e3-11f8712c3d71" data-section-level="1" data-section-text="GridPartitioner"><h1 id="gridpartitioner">GridPartitioner</h1><p>Create a uniform grid that overlays the mesh to be partitioned.  Assign all elements within each cell of the grid to the same processor.</p><section class="scrollspy" id="546b5a04-1532-409e-91cc-1aa377d47ba0" data-section-level="2" data-section-text="Description"><h2 id="description">Description</h2><p>Partitions the mesh by creating a grid in <code>x,y,z</code> and assigning each element of the mesh to a separate &quot;cell&quot; within the grid.  This is useful when you have simple cartesian meshes and you just want to specify partitioning fairly directly.  Sometimes a human is the best partitioner!</p><p>This is an example of a <code>2x2</code> grid partitioning for use on <code>4</code> processors.</p><div class="card moose-float" style="width:40%"><div class="card-content"><picture class="materialboxed moose-image"><img src="../../media/partitioner/grid_partitioner_example.png"></img></picture><p class="moose-caption"><span class="moose-caption-text">2x2 <code>GridPartitioner</code> Example</span></p></div></div><div class="card moose-alert moose-alert-warning"><div class="card-title moose-alert-title"><span class="moose-alert-title-brand">warning</span></div><div class="card-content"><div class="moose-alert-content"><p><p>The number of cells (<code>nx*ny*nz</code>) MUST be equal to the number of MPI processes you&#x27;re attempting to use!</p></p></div></div></div></section><section class="scrollspy" id="b92f258d-4a26-45dd-9920-94876ed1ed3b" data-section-level="2" data-section-text="How it Works"><h2 id="how-it-works">How it Works</h2><p>The GridPartitioner works by creating a <a href="../mesh/GeneratedMesh.html">GeneratedMesh</a> for the &quot;grid&quot;.  That&#x27;s the reason why this object takes similar input file parameters to a <a href="../mesh/GeneratedMesh.html">GeneratedMesh</a>.  The GeneratedMesh created by GridPartitioner is guaranteed to contain the original domain within it.</p><p>To assign the processor IDs the centroid of each element of the mesh to be partitioned is searched for in the GeneratedMesh.  The ID of the element of the GeneratedMesh that it lies within is then assigned as the <code>processor_id</code>.</p></section><section class="scrollspy" id="3a61762b-e231-479e-b0fe-f355e3167034" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="0d00d6fb-af25-4208-8f3a-b39499fbf878" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">allow_renumbering</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">If allow_renumbering=false, node and element numbers are kept fixed until deletion</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>If allow_renumbering=false, node and element numbers are kept fixed until deletion</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">bias_x</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">The amount by which to grow (or shrink) the cells in the x-direction.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The amount by which to grow (or shrink) the cells in the x-direction.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">bias_y</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">The amount by which to grow (or shrink) the cells in the y-direction.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The amount by which to grow (or shrink) the cells in the y-direction.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">bias_z</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">The amount by which to grow (or shrink) the cells in the z-direction.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The amount by which to grow (or shrink) the cells in the z-direction.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">gauss_lobatto_grid</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Grade mesh into boundaries according to Gauss-Lobatto quadrature spacing.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Grade mesh into boundaries according to Gauss-Lobatto quadrature spacing.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">ghosting_patch_size</span><span class="moose-parameter-header-description">The number of nearest neighbors considered for ghosting purposes when 'iteration' patch update strategy is used. Default is 5 * patch_size.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The number of nearest neighbors considered for ghosting purposes when 'iteration' patch update strategy is used. Default is 5 * patch_size.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">max_leaf_size</span><span class="moose-parameter-header-default">10</span><span class="moose-parameter-header-description">The maximum number of points in each leaf of the KDTree used in the nearest neighbor search. As the leaf size becomes larger,KDTree construction becomes faster but the nearest neighbor searchbecomes slower.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>10</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The maximum number of points in each leaf of the KDTree used in the nearest neighbor search. As the leaf size becomes larger,KDTree construction becomes faster but the nearest neighbor searchbecomes slower.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">nx</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">Number of elements in the X direction</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Number of elements in the X direction</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">ny</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">Number of elements in the Y direction</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Number of elements in the Y direction</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">nz</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">Number of elements in the Z direction</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Number of elements in the Z direction</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">parallel_type</span><span class="moose-parameter-header-default">REPLICATED</span><span class="moose-parameter-header-description">DEFAULT: Use libMesh::ReplicatedMesh unless --distributed-mesh is specified on the command line REPLICATED: Always use libMesh::ReplicatedMesh DISTRIBUTED: Always use libMesh::DistributedMesh</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>REPLICATED</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>DEFAULT REPLICATED DISTRIBUTED</p><p class="moose-parameter-description"><span>Description:</span>DEFAULT: Use libMesh::ReplicatedMesh unless --distributed-mesh is specified on the command line REPLICATED: Always use libMesh::ReplicatedMesh DISTRIBUTED: Always use libMesh::DistributedMesh</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="304fa4a8-c445-4435-ad4d-92a6e524ebfa" data-section-level="3" data-section-text="Partitioning Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">centroid_partitioner_direction</span><span class="moose-parameter-header-description">Specifies the sort direction if using the centroid partitioner. Available options: x, y, z, radial</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>x y z radial</p><p class="moose-parameter-description"><span>Description:</span>Specifies the sort direction if using the centroid partitioner. Available options: x, y, z, radial</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">partitioner</span><span class="moose-parameter-header-default">linear</span><span class="moose-parameter-header-description">Specifies a mesh partitioner to use when splitting the mesh for a parallel computation.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>linear</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>default metis parmetis linear centroid hilbert_sfc morton_sfc</p><p class="moose-parameter-description"><span>Description:</span>Specifies a mesh partitioner to use when splitting the mesh for a parallel computation.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Partitioning Parameters</h3></summary></details></section><section id="cc66859a-5b01-4fc2-a3a7-75da28f33c3f" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">construct_node_list_from_side_list</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether or not to generate nodesets from the sidesets (usually a good idea).</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not to generate nodesets from the sidesets (usually a good idea).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">nemesis</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">If nemesis=true and file=foo.e, actually reads foo.e.N.0, foo.e.N.1, ... foo.e.N.N-1, where N = # CPUs, with NemesisIO.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>If nemesis=true and file=foo.e, actually reads foo.e.N.0, foo.e.N.1, ... foo.e.N.N-1, where N = # CPUs, with NemesisIO.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">patch_size</span><span class="moose-parameter-header-default">40</span><span class="moose-parameter-header-description">The number of nodes to consider in the NearestNode neighborhood.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>40</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The number of nodes to consider in the NearestNode neighborhood.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">patch_update_strategy</span><span class="moose-parameter-header-default">never</span><span class="moose-parameter-header-description">How often to update the geometric search 'patch'.  The default is to never update it (which is the most efficient but could be a problem with lots of relative motion). 'always' will update the patch for all secondary nodes at the beginning of every timestep which might be time consuming. 'auto' will attempt to determine at the start of which timesteps the patch for all secondary nodes needs to be updated automatically.'iteration' updates the patch at every nonlinear iteration for a subset of secondary nodes for which penetration is not detected. If there can be substantial relative motion between the primary and secondary surfaces during the nonlinear iterations within a timestep, it is advisable to use 'iteration' option to ensure accurate contact detection.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>never</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>never always auto iteration</p><p class="moose-parameter-description"><span>Description:</span>How often to update the geometric search 'patch'.  The default is to never update it (which is the most efficient but could be a problem with lots of relative motion). 'always' will update the patch for all secondary nodes at the beginning of every timestep which might be time consuming. 'auto' will attempt to determine at the start of which timesteps the patch for all secondary nodes needs to be updated automatically.'iteration' updates the patch at every nonlinear iteration for a subset of secondary nodes for which penetration is not detected. If there can be substantial relative motion between the primary and secondary surfaces during the nonlinear iterations within a timestep, it is advisable to use 'iteration' option to ensure accurate contact detection.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="6559e0ff-40b6-4fe3-8124-1ef23e5f2ae3" data-section-level="2" data-section-text="References"><h2 id="references">References</h2><div class="moose-bibliography"><ol></ol></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#546b5a04-1532-409e-91cc-1aa377d47ba0" class="tooltipped" data-position="left" data-tooltip="Description">Description</a></li><li><a href="#b92f258d-4a26-45dd-9920-94876ed1ed3b" class="tooltipped" data-position="left" data-tooltip="How it Works">How it Works</a></li><li><a href="#3a61762b-e231-479e-b0fe-f355e3167034" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#6559e0ff-40b6-4fe3-8124-1ef23e5f2ae3" class="tooltipped" data-position="left" data-tooltip="References">References</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>